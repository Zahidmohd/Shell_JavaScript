<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shell - Interactive Terminal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: #2d2d30;
            padding: 10px 20px;
            border-bottom: 1px solid #3e3e42;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header h1 {
            font-size: 14px;
            font-weight: normal;
            color: #cccccc;
        }

        .header .controls {
            display: flex;
            gap: 8px;
        }

        .btn {
            background: #3e3e42;
            border: 1px solid #555;
            color: #d4d4d4;
            padding: 4px 12px;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
            font-family: 'Consolas', monospace;
        }

        .btn:hover {
            background: #4e4e52;
        }

        .terminal-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            background: #1e1e1e;
        }

        .output-line {
            margin: 2px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.4;
        }

        .prompt-line {
            display: flex;
            align-items: center;
            margin: 2px 0;
        }

        .prompt {
            color: #4ec9b0;
            margin-right: 8px;
            user-select: none;
        }

        .input-line {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            caret-color: #d4d4d4;
        }

        .command-output {
            color: #ce9178;
        }

        .error-output {
            color: #f48771;
        }

        .success-output {
            color: #4ec9b0;
        }

        .info-output {
            color: #569cd6;
        }

        .history-item {
            color: #808080;
        }

        .welcome {
            color: #4ec9b0;
            margin-bottom: 10px;
            padding: 10px;
            border-left: 3px solid #4ec9b0;
            background: #2d2d30;
        }

        .feature-list {
            color: #9cdcfe;
            padding-left: 20px;
            margin: 10px 0;
        }

        .feature-list li {
            margin: 3px 0;
        }

        .demo-section {
            background: #252526;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 3px solid #569cd6;
        }

        .demo-title {
            color: #569cd6;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .demo-command {
            color: #ce9178;
            background: #1e1e1e;
            padding: 5px 10px;
            border-radius: 3px;
            margin: 3px 0;
            cursor: pointer;
        }

        .demo-command:hover {
            background: #2d2d30;
        }

        .scrollbar::-webkit-scrollbar {
            width: 10px;
        }

        .scrollbar::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        .scrollbar::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 5px;
        }

        .scrollbar::-webkit-scrollbar-thumb:hover {
            background: #4e4e4e;
        }

        .status-bar {
            background: #007acc;
            color: white;
            padding: 4px 20px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üêö Custom Shell - Feature Demo</h1>
        <div class="controls">
            <button class="btn" onclick="clearTerminal()">Clear</button>
            <button class="btn" onclick="showDemos()">Show Demos</button>
            <button class="btn" onclick="showHelp()">Help</button>
        </div>
    </div>

    <div class="terminal-container scrollbar" id="terminal">
        <div class="welcome">
            <strong>üéâ Welcome to Custom Shell - Complete Feature Demo</strong><br><br>
            This shell implements ALL advanced features from scratch!<br>
            Type commands below or click "Show Demos" to see examples.
        </div>
    </div>

    <div class="status-bar">
        <span id="status">Ready</span>
        <span id="feature-indicator">All Features Active ‚úì</span>
    </div>

    <script>
        const terminal = document.getElementById('terminal');
        const statusEl = document.getElementById('status');
        let commandHistory = [];
        let historyIndex = -1;

        // Create initial prompt
        createPrompt();

        function createPrompt() {
            const promptLine = document.createElement('div');
            promptLine.className = 'prompt-line';
            
            const prompt = document.createElement('span');
            prompt.className = 'prompt';
            prompt.textContent = '$';
            
            const input = document.createElement('input');
            input.className = 'input-line';
            input.type = 'text';
            input.autocomplete = 'off';
            input.spellcheck = false;
            
            input.addEventListener('keydown', handleInput);
            
            promptLine.appendChild(prompt);
            promptLine.appendChild(input);
            terminal.appendChild(promptLine);
            
            input.focus();
            terminal.scrollTop = terminal.scrollHeight;
        }

        function handleInput(e) {
            if (e.key === 'Enter') {
                const command = e.target.value.trim();
                if (command) {
                    commandHistory.push(command);
                    historyIndex = commandHistory.length;
                    executeCommand(command);
                }
                e.target.disabled = true;
                createPrompt();
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if (historyIndex > 0) {
                    historyIndex--;
                    e.target.value = commandHistory[historyIndex];
                }
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                if (historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    e.target.value = commandHistory[historyIndex];
                } else {
                    historyIndex = commandHistory.length;
                    e.target.value = '';
                }
            }
        }

        function executeCommand(command) {
            // Demo mode - show what features are being used
            const features = detectFeatures(command);
            if (features.length > 0) {
                statusEl.textContent = `Using: ${features.join(', ')}`;
            }

            // Simulate command execution
            if (command === 'clear') {
                clearTerminal();
                return;
            }

            if (command === 'help') {
                showHelp();
                return;
            }

            if (command === 'demos') {
                showDemos();
                return;
            }

            // Show the command with simulation
            addOutput(command, 'command-output');
            addOutput(simulateOutput(command), 'info-output');
        }

        function detectFeatures(command) {
            const features = [];
            if (command.includes('|')) features.push('Pipelines');
            if (command.includes('>') || command.includes('>>')) features.push('Redirection');
            if (command.includes('$')) features.push('Variable Interpolation');
            if (command.includes('{') && command.includes('}')) features.push('Brace Expansion');
            if (command.includes(';')) features.push('Script Execution');
            if (command.includes('&')) features.push('Job Control');
            if (command.match(/^(echo|pwd|cd|type|history|jobs|fg|bg|alias|unalias|source)/)) {
                features.push('Builtins');
            }
            return features;
        }

        function simulateOutput(command) {
            // Provide helpful simulation messages
            const demos = {
                'alias': '‚úì Alias feature - Use: alias ll="ls -la"',
                'unalias': '‚úì Remove alias',
                'history': '‚úì Command history feature',
                'jobs': '‚úì Job control - Shows background jobs',
                'source': '‚úì Execute commands from file',
                'echo {a,b,c}': 'a b c (Brace expansion)',
                'echo {1..5}': '1 2 3 4 5 (Sequence expansion)',
            };

            for (const [key, value] of Object.entries(demos)) {
                if (command.includes(key)) {
                    return value;
                }
            }

            return '‚úì Command recognized - Run in actual shell for full execution';
        }

        function addOutput(text, className = '') {
            const output = document.createElement('div');
            output.className = `output-line ${className}`;
            output.textContent = text;
            terminal.appendChild(output);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function clearTerminal() {
            terminal.innerHTML = '';
            createPrompt();
            statusEl.textContent = 'Ready';
        }

        function showHelp() {
            const helpText = `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    CUSTOM SHELL - FEATURES                     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üì¶ CORE FEATURES:
  ‚Ä¢ Builtins: echo, exit, type, pwd, cd
  ‚Ä¢ External Commands: Execute any program in PATH
  ‚Ä¢ Quote Handling: Single quotes, double quotes, backslashes

üîÑ I/O & PIPES:
  ‚Ä¢ Pipelines: command1 | command2 | command3
  ‚Ä¢ Output Redirection: >, >>, 2>, 2>>
  ‚Ä¢ Input Redirection: < file
  
üìö HISTORY:
  ‚Ä¢ history [n] - Show command history
  ‚Ä¢ history -r file - Read history from file
  ‚Ä¢ history -w file - Write history to file
  ‚Ä¢ history -a file - Append new commands to file
  ‚Ä¢ Auto-load from ~/.shell_history

‚ö° AUTOCOMPLETION:
  ‚Ä¢ TAB - Complete builtins, executables, and paths
  ‚Ä¢ Double-TAB - Show all possibilities
  ‚Ä¢ Longest Common Prefix completion

üîß ADVANCED:
  ‚Ä¢ Variables: VAR=value, $VAR, ${VAR}, $?
  ‚Ä¢ Aliases: alias name='command'
  ‚Ä¢ Job Control: &, jobs, fg, bg
  ‚Ä¢ Brace Expansion: {a,b,c}, {1..10}, {a..z}
  ‚Ä¢ Script Execution: ; separator and script files
  ‚Ä¢ Profile Loading: ~/.shellrc, ~/.profile

üí° DEMO COMMANDS:
  Type 'demos' to see feature demonstrations
  
Press Ctrl+C to exit (in actual shell)
            `;
            addOutput(helpText, 'info-output');
        }

        function showDemos() {
            terminal.innerHTML = '';
            
            const demos = [
                {
                    title: '1. BRACE EXPANSION',
                    commands: [
                        'echo {a,b,c}',
                        'echo {1..10}',
                        'echo file{1,2,3}.txt',
                        'echo {a..z}',
                        'echo prefix_{x,y,z}_suffix'
                    ]
                },
                {
                    title: '2. ALIASES',
                    commands: [
                        'alias ll="ls -la"',
                        'alias',
                        'alias p="pwd"',
                        'type ll',
                        'unalias ll'
                    ]
                },
                {
                    title: '3. PIPELINES & REDIRECTION',
                    commands: [
                        'echo "test" | cat',
                        'ls | grep txt',
                        'echo "data" > output.txt',
                        'cat < input.txt',
                        'ls nonexistent 2> error.log'
                    ]
                },
                {
                    title: '4. VARIABLES',
                    commands: [
                        'MY_VAR=hello',
                        'echo $MY_VAR',
                        'echo ${MY_VAR}_world',
                        'ls nonexistent; echo $?'
                    ]
                },
                {
                    title: '5. JOB CONTROL',
                    commands: [
                        'sleep 10 &',
                        'jobs',
                        'fg 1',
                        'bg 1'
                    ]
                },
                {
                    title: '6. HISTORY',
                    commands: [
                        'history',
                        'history 10',
                        'history -w myhistory.txt',
                        'history -a myhistory.txt'
                    ]
                },
                {
                    title: '7. SCRIPT EXECUTION',
                    commands: [
                        'echo "line1"; echo "line2"',
                        'source script.sh',
                        'node app/main.js script.sh'
                    ]
                },
                {
                    title: '8. AUTOCOMPLETION',
                    commands: [
                        'ech<TAB> ‚Üí echo ',
                        'cd ~/Doc<TAB> ‚Üí cd ~/Documents/',
                        'ls<TAB><TAB> ‚Üí shows all commands starting with ls'
                    ]
                }
            ];

            demos.forEach(demo => {
                const section = document.createElement('div');
                section.className = 'demo-section';
                
                const title = document.createElement('div');
                title.className = 'demo-title';
                title.textContent = demo.title;
                section.appendChild(title);
                
                demo.commands.forEach(cmd => {
                    const cmdDiv = document.createElement('div');
                    cmdDiv.className = 'demo-command';
                    cmdDiv.textContent = '$ ' + cmd;
                    cmdDiv.onclick = () => {
                        clearTerminal();
                        addOutput('Copied to clipboard: ' + cmd, 'success-output');
                        addOutput('(In actual shell, paste and run this command)', 'info-output');
                        navigator.clipboard.writeText(cmd).catch(() => {});
                    };
                    section.appendChild(cmdDiv);
                });
                
                terminal.appendChild(section);
            });

            const backBtn = document.createElement('div');
            backBtn.className = 'demo-command';
            backBtn.textContent = '‚Üê Back to Terminal';
            backBtn.style.marginTop = '20px';
            backBtn.style.textAlign = 'center';
            backBtn.style.background = '#007acc';
            backBtn.style.color = 'white';
            backBtn.onclick = () => {
                clearTerminal();
            };
            terminal.appendChild(backBtn);
        }

        // Focus input when clicking anywhere in terminal
        terminal.addEventListener('click', () => {
            const inputs = terminal.querySelectorAll('.input-line');
            const lastInput = inputs[inputs.length - 1];
            if (lastInput && !lastInput.disabled) {
                lastInput.focus();
            }
        });
    </script>
</body>
</html>

